<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.js"></script>
</head>
<body>
  Fajr <div id='fajr' style="display: inline-block;">00:00 AM</div><br />
  Sunrise <div id='sunrise' style="display: inline-block;">00:00 AM</div><br />
  Dhuhr <div id='dhuhr' style="display: inline-block;">00:00 AM</div><br />
  Asr <div id='asr' style="display: inline-block;">00:00 AM</div><br />
  Maghrib <div id='maghrib' style="display: inline-block;">00:00 AM</div><br />
  Isha <div id='isha' style="display: inline-block;">00:00 AM</div><br />

<script>
  Papa.parse("data.csv", {
    download: true,
    dynamicTyping: true,
    header: true,
    complete: function(results) {
      console.log("Parsing complete: Full Result", results.data);
      console.log("Parsing complete: first object", results.data[0]["prayer_date"]);

      // Calculating number of days elapsed since the start of the year.
      start = new Date("January 1, 2016");
      today = new Date();
      var one_day = 1000 * 60 * 60 * 24;

      // taking the difference and using floor from Math to round down to whole #.
      // If we use ceiling, it might jump to next day half way through the day.
      var number_of_days_elapsed = Math.floor((today.getTime() - start.getTime()) / one_day);
      console.log(number_of_days_elapsed + "days elapsed.")

      // Accessing prayer times, and writing to DOM innerHTML.
      // Internal Mohid csv template keys/headers for access of each prayer time.
      salatKey = ['fajr_azaan', 'sunrise', 'duhar_azaan', 'asr_azaan', 'maghrib_azaan', 'isha_azaan'];

      // div Id for element selection.
      salatId = ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'];

      for (i = 0; i < 6; i++) {
        // creating the dataString to init new Date object for each prayer time.
        // Allows for easier manipulation of the data from string to date object.
        // gives me access to getHours() and getMinutes() methods.
        var dataString = "March 09, 2016";
        dataString = dataString + " " + results.data[number_of_days_elapsed][salatKey[i]];

        var newDate = new Date(dataString);
        var hour = newDate.getHours();
        var minutes = newDate.getMinutes();
        var timeSuffix = "AM";

        // function to check whether or not hours are above 12 PM and to modify suffix accordingly.
        function checkHours(z) {
          if (z >= 12) {
            if (z == 12) {
              timeSuffix = "PM";
            } else {
              z = z - 12;
              timeSuffix = "PM";
              hour = z;
            }
          }
        }
        checkHours(hour);

        // using the salatId[i] to access each div and write the proper prayer time.
        document.getElementById(salatId[i]).innerHTML = hour + ":" + minutes + " " + timeSuffix;
      }
    }
  });
</script>
</body>
</html>
